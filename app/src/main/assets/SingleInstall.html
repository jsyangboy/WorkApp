<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>FungoLive About</title>
    <meta name="Generator" content="EditPlus">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<pre class="brush: java;">

package demo.yqy.org.workapp.bean;

public class Test {

    private Test() {
    }

    private volatile static Test test;

    public static Test getInstance() {
        if (test == null) {
            synchronized (Test.class) {
                if (test == null) {
                    test = new Test();
                }
            }
        }
        return test;
    }
}


</pre>

<h3>
    要保证单例，需要做一下几步
</h3>
<p>
    1.必须防止外部可以调用构造函数进行实例化，因此构造函数必须私有化。<br>
    2.必须定义一个静态函数获得该单例<br>
    3.单例使用volatile修饰<br>
    4.使用synchronized 进行同步处理，并且双重判断是否为null，
    我们看到synchronized (Singleton.class)里面又进行了是否为null的判断，
    这是因为一个线程进入了该代码，如果另一个线程在等待，这时候前一个线程创建了一
    个实例出来完毕后，另一个线程获得锁进入该同步代码，实例已经存在，
    没必要再次创建，因此这个判断是否是null还是必须的
</p>
</body>
</html>
